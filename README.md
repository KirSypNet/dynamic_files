# dynamic_files
Модуль для Bitrix24, который позволяет подключать собственные скрипты на необходимые страницы.

## Требования

- Bitrix24 CRM с ядром D7
- PHP 8.0 или выше

## Установка

### 1. Копирование модуля

Скопируйте папку `kirsyp.dynamic_files` в директорию `/local/modules/` вашего сайта.

### 2. Установка через админку

1. Перейдите в раздел **Marketplace → Установленные решения**
2. Найдите модуль "Динамические файлы"
3. Нажмите "Установить"

## Использование

В **kirsyp_dynamic_files_settings_admin.php** описаны настройки модуля, которые можно редактировать через админку.

В **MainEventService.php** регистрируем скрипт (**assets/js**) и подключаем по необходимому условию.

Текущая реализация модуля убирает из выбранной в админке воронки провальную стадию (стандартными средствами это сделать нельзя).

## Дополнение

Также проработана возможность обращения к backend через AJAX-controller (используйте **BX.ajax.runAction**).

## Примечание

* Скрипты и стили копируются в папку **bitrix/js/dynamic_files** при установке модуля. После добавления или редактирования скриптов необходимо переустановить модуль.

* В методе **DoUninstall()** закомментирована строка **Option::delete($this->MODULE_ID);**. Это сделано для сохранения настроек при переустановке модуля.

* Если необхдимо очистить настройки из админки при переустановки - расскоментируйте строку **Option::delete($this->MODULE_ID);**.